<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>å›¾ç‰‡æ¢æµ‹æŠ€æœ¯ä¿¡æ¯æ”¶é›†æ¼”ç¤º</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      :root {
        --primary: #4361ee;
        --secondary: #3f37c9;
        --success: #4cc9f0;
        --dark: #1d3557;
        --light: #f8f9fa;
        --danger: #e63946;
        --warning: #ff9e00;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      }

      body {
        background: linear-gradient(135deg, #1d2b64, #f8cdda);
        color: #333;
        line-height: 1.6;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.92);
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        overflow: hidden;
      }

      header {
        background: var(--dark);
        color: white;
        padding: 2rem;
        text-align: center;
        position: relative;
      }

      h1 {
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
      }

      .subtitle {
        font-size: 1.2rem;
        opacity: 0.8;
        max-width: 800px;
        margin: 0 auto;
      }

      .content {
        display: flex;
        padding: 2rem;
        gap: 2rem;
      }

      .panel {
        flex: 1;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        padding: 1.5rem;
        transition: transform 0.3s ease;
      }

      .panel:hover {
        transform: translateY(-5px);
      }

      .panel h2 {
        color: var(--primary);
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid var(--success);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .panel h2 i {
        font-size: 1.5rem;
      }

      .info-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.2rem;
      }

      .info-card {
        background: var(--light);
        padding: 1rem;
        border-radius: 10px;
        border-left: 4px solid var(--success);
      }

      .info-card h3 {
        font-size: 1rem;
        margin-bottom: 0.5rem;
        color: var(--dark);
      }

      .info-card p {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--primary);
        word-break: break-all;
      }

      .controls {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
      }

      .btn {
        padding: 1rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background: var(--primary);
        color: white;
      }

      .btn-primary:hover {
        background: var(--secondary);
        transform: scale(1.03);
      }

      .btn-danger {
        background: var(--danger);
        color: white;
      }

      .btn-danger:hover {
        background: #c1121f;
        transform: scale(1.03);
      }

      .btn-warning {
        background: var(--warning);
        color: white;
      }

      .btn-warning:hover {
        background: #ff8500;
        transform: scale(1.03);
      }

      .result-box {
        background: var(--light);
        border-radius: 10px;
        padding: 1.5rem;
        margin-top: 1.5rem;
        min-height: 150px;
        border: 1px dashed var(--primary);
      }

      .result-box h3 {
        margin-bottom: 1rem;
        color: var(--secondary);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      pre {
        background: #1d3557;
        color: #f1faee;
        padding: 1rem;
        border-radius: 8px;
        overflow-x: auto;
        font-size: 0.9rem;
        line-height: 1.5;
      }

      .explanation {
        background: #e9f5ff;
        border-left: 4px solid var(--success);
        padding: 1.5rem;
        border-radius: 0 10px 10px 0;
        margin-top: 2rem;
      }

      .explanation h3 {
        color: var(--dark);
        margin-bottom: 1rem;
      }

      .explanation ul {
        padding-left: 1.5rem;
      }

      .explanation li {
        margin-bottom: 0.8rem;
      }

      .privacy-warning {
        background: #fff3cd;
        border-left: 4px solid var(--warning);
        padding: 1rem;
        border-radius: 0 8px 8px 0;
        margin-top: 1.5rem;
      }

      footer {
        text-align: center;
        padding: 2rem;
        color: white;
        background: var(--dark);
        margin-top: 2rem;
      }

      .counter {
        display: flex;
        justify-content: space-around;
        margin: 1.5rem 0;
      }

      .counter-item {
        text-align: center;
      }

      .counter-number {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--primary);
      }

      .counter-label {
        font-size: 0.9rem;
        color: var(--dark);
      }

      @media (max-width: 900px) {
        .content {
          flex-direction: column;
        }

        .info-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1><i class="fas fa-camera"></i> å›¾ç‰‡æ¢æµ‹æŠ€æœ¯ä¿¡æ¯æ”¶é›†æ¼”ç¤º</h1>
        <p class="subtitle">
          å±•ç¤ºå›¾ç‰‡æ¢æµ‹å¦‚ä½•æ”¶é›†ç”¨æˆ·è®¾å¤‡ä¿¡æ¯ã€æµè§ˆå™¨ä¿¡æ¯åŠè¡Œä¸ºæ•°æ®
        </p>
      </header>

      <div class="content">
        <div class="panel">
          <h2><i class="fas fa-info-circle"></i> å¯æ”¶é›†çš„ç”¨æˆ·ä¿¡æ¯</h2>
          <div class="info-grid">
            <div class="info-card">
              <h3>ç”¨æˆ·ä»£ç† (User Agent)</h3>
              <p id="user-agent"></p>
            </div>
            <div class="info-card">
              <h3>å±å¹•åˆ†è¾¨ç‡</h3>
              <p id="screen-resolution"></p>
            </div>
            <div class="info-card">
              <h3>æµè§ˆå™¨è¯­è¨€</h3>
              <p id="browser-language"></p>
            </div>
            <div class="info-card">
              <h3>æ—¶åŒº</h3>
              <p id="timezone"></p>
            </div>
            <div class="info-card">
              <h3>è®¾å¤‡åƒç´ æ¯”</h3>
              <p id="pixel-ratio"></p>
            </div>
            <div class="info-card">
              <h3>é¢œè‰²æ·±åº¦</h3>
              <p id="color-depth"></p>
            </div>
            <div class="info-card">
              <h3>æ˜¯å¦å¯ç”¨ Cookie</h3>
              <p id="cookies-enabled"></p>
            </div>
            <div class="info-card">
              <h3>é¡µé¢æ¥æº</h3>
              <p id="page-referrer"></p>
            </div>
          </div>

          <div class="counter">
            <div class="counter-item">
              <div class="counter-number" id="time-on-page">0</div>
              <div class="counter-label">é¡µé¢åœç•™æ—¶é—´ (ç§’)</div>
            </div>
            <div class="counter-item">
              <div class="counter-number" id="beacon-count">0</div>
              <div class="counter-label">ä¿¡æ ‡å‘é€æ¬¡æ•°</div>
            </div>
          </div>

          <div class="privacy-warning">
            <i class="fas fa-exclamation-triangle"></i>
            <strong>éšç§æç¤ºï¼š</strong>
            æ­¤æ¼”ç¤ºå±•ç¤ºäº†ç½‘ç«™å¯èƒ½æ”¶é›†çš„ä¿¡æ¯ç±»å‹ã€‚å®é™…åº”ç”¨ä¸­åº”éµå®ˆéšç§æ³•è§„å¹¶è·å–ç”¨æˆ·åŒæ„ã€‚
          </div>
        </div>

        <div class="panel">
          <h2><i class="fas fa-cogs"></i> æ§åˆ¶é¢æ¿</h2>
          <div class="controls">
            <button class="btn btn-primary" id="send-beacon">
              <i class="fas fa-paper-plane"></i> å‘é€å›¾ç‰‡ä¿¡æ ‡
            </button>

            <button class="btn btn-warning" id="simulate-ad">
              <i class="fas fa-ad"></i> æ¨¡æ‹Ÿå¹¿å‘Šç‚¹å‡»
            </button>

            <button class="btn btn-danger" id="clear-log">
              <i class="fas fa-trash-alt"></i> æ¸…é™¤æ—¥å¿—
            </button>
          </div>

          <div class="result-box">
            <h3><i class="fas fa-terminal"></i> ä¿¡æ ‡å‘é€æ—¥å¿—</h3>
            <pre id="log-output">// æ—¥å¿—å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</pre>
          </div>
        </div>
      </div>

      <div class="explanation">
        <h3><i class="fas fa-lightbulb"></i> å›¾ç‰‡æ¢æµ‹æŠ€æœ¯è¯´æ˜</h3>
        <ul>
          <li>
            <strong>å·¥ä½œåŸç†ï¼š</strong>
            é€šè¿‡åˆ›å»ºä¸€ä¸ªImageå¯¹è±¡å¹¶è®¾ç½®å…¶srcå±æ€§ï¼Œå‘æœåŠ¡å™¨å‘é€GETè¯·æ±‚ï¼Œåœ¨URLå‚æ•°ä¸­åŒ…å«è¦æ”¶é›†çš„ä¿¡æ¯
          </li>
          <li>
            <strong>ä¼˜åŠ¿ï¼š</strong>
            ç®€å•è½»é‡ã€è·¨åŸŸå…¼å®¹æ€§å¥½ã€ä¸é˜»å¡é¡µé¢åŠ è½½ã€ä¸éœ€è¦å¤„ç†å“åº”
          </li>
          <li>
            <strong>å…¸å‹åº”ç”¨ï¼š</strong>
            å¹¿å‘Šç‚¹å‡»è·Ÿè¸ªã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€é”™è¯¯æŠ¥å‘Šã€é¡µé¢æ€§èƒ½ç›‘æ§
          </li>
          <li>
            <strong>éšç§è€ƒè™‘ï¼š</strong>
            ç°ä»£æµè§ˆå™¨é™åˆ¶äº†éƒ¨åˆ†ä¿¡æ¯çš„è·å–ï¼Œå®é™…åº”ç”¨ä¸­åº”éµå®ˆGDPRã€CCPAç­‰éšç§æ³•è§„
          </li>
          <li>
            <strong>é™åˆ¶ï¼š</strong>
            æ•°æ®é‡å—URLé•¿åº¦é™åˆ¶ï¼ˆçº¦2000å­—ç¬¦ï¼‰ï¼Œåªèƒ½ä½¿ç”¨GETè¯·æ±‚
          </li>
        </ul>
      </div>

      <footer>
        <p>å›¾ç‰‡æ¢æµ‹æŠ€æœ¯æ¼”ç¤º | ä»…ç”¨äºæ•™è‚²ç›®çš„ | å±•ç¤ºç½‘ç«™å¯èƒ½æ”¶é›†çš„ä¿¡æ¯ç±»å‹</p>
      </footer>
    </div>

    <script>
      // åˆå§‹åŒ–æ”¶é›†ç”¨æˆ·ä¿¡æ¯
      function collectUserInfo() {
        // è®¾å¤‡ä¿¡æ¯
        document.getElementById("user-agent").textContent = navigator.userAgent;
        document.getElementById(
          "screen-resolution"
        ).textContent = `${window.screen.width} Ã— ${window.screen.height}`;
        document.getElementById("browser-language").textContent =
          navigator.language || navigator.userLanguage;
        document.getElementById("timezone").textContent =
          Intl.DateTimeFormat().resolvedOptions().timeZone;
        document.getElementById("pixel-ratio").textContent =
          window.devicePixelRatio;
        document.getElementById(
          "color-depth"
        ).textContent = `${window.screen.colorDepth} ä½`;
        document.getElementById("cookies-enabled").textContent =
          navigator.cookieEnabled ? "æ˜¯" : "å¦";
        document.getElementById("page-referrer").textContent =
          document.referrer || "æ— æ¥æºä¿¡æ¯";
      }

      // å‘é€å›¾ç‰‡ä¿¡æ ‡
      function sendImageBeacon(eventType = "manual") {
        const beaconId = Math.floor(Math.random() * 1000000);
        const timestamp = new Date().toISOString();

        // æ”¶é›†è¦å‘é€çš„ä¿¡æ¯
        const data = {
          event: eventType,
          beaconId: beaconId,
          timestamp: timestamp,
          userAgent: navigator.userAgent,
          screen: `${screen.width}x${screen.height}`,
          language: navigator.language || navigator.userLanguage,
          timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
          pixelRatio: window.devicePixelRatio,
          colorDepth: screen.colorDepth,
          cookiesEnabled: navigator.cookieEnabled,
          referrer: document.referrer || "direct",
          timeOnPage: Math.floor((Date.now() - pageLoadTime) / 1000),
          viewport: `${window.innerWidth}x${window.innerHeight}`,
        };

        // åˆ›å»ºå›¾ç‰‡å¯¹è±¡å‘é€ä¿¡æ ‡
        const img = new Image();
        const params = new URLSearchParams(data).toString();

        // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œåº”è¯¥æ˜¯ä¸€ä¸ªçœŸå®çš„æœåŠ¡å™¨ç«¯ç‚¹
        // æ­¤å¤„ä½¿ç”¨ä¸€ä¸ªæ¨¡æ‹ŸURLï¼Œè¯·æ±‚ä¼šå¤±è´¥ï¼Œä½†æˆ‘ä»¬ä¼šè®°å½•å‘é€çš„ä¿¡æ¯
        img.src = `https://tracking.example.com/beacon.gif?${params}`;

        // æ›´æ–°ä¿¡æ ‡è®¡æ•°å™¨
        beaconCount++;
        document.getElementById("beacon-count").textContent = beaconCount;

        // è®°å½•å‘é€çš„ä¿¡æ¯
        logEvent(`ğŸ“¡ ä¿¡æ ‡å·²å‘é€ (ID: ${beaconId})`);
        logEvent(
          `äº‹ä»¶ç±»å‹: ${eventType === "manual" ? "æ‰‹åŠ¨å‘é€" : "å¹¿å‘Šç‚¹å‡»"}`
        );
        logEvent(`å‘é€æ—¶é—´: ${new Date().toLocaleTimeString()}`);
        logEvent(`æºå¸¦æ•°æ®: ${JSON.stringify(data, null, 2)}`);
        logEvent("--------------------------------------");
      }

      // æ¨¡æ‹Ÿå¹¿å‘Šç‚¹å‡»
      function simulateAdClick() {
        // ç”Ÿæˆéšæœºä½ç½®
        const x = Math.floor(Math.random() * 80) + 10;
        const y = Math.floor(Math.random() * 80) + 10;

        logEvent(`ğŸ–±ï¸ æ¨¡æ‹Ÿå¹¿å‘Šç‚¹å‡» (ä½ç½®: X=${x}%, Y=${y}%)`);
        sendImageBeacon("ad-click");
      }

      // è®°å½•äº‹ä»¶åˆ°æ—¥å¿—
      function logEvent(message) {
        const logElement = document.getElementById("log-output");
        logElement.textContent = message + "\n" + logElement.textContent;
      }

      // æ¸…é™¤æ—¥å¿—
      function clearLog() {
        document.getElementById("log-output").textContent = "// æ—¥å¿—å·²æ¸…é™¤...";
      }

      // é¡µé¢åŠ è½½æ—¶é—´
      const pageLoadTime = Date.now();
      let beaconCount = 0;
      let timeCounter = 0;

      // åˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", () => {
        collectUserInfo();

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        document.getElementById("send-beacon").addEventListener("click", () => {
          sendImageBeacon();
        });

        document
          .getElementById("simulate-ad")
          .addEventListener("click", simulateAdClick);

        document
          .getElementById("clear-log")
          .addEventListener("click", clearLog);

        // æ›´æ–°é¡µé¢åœç•™æ—¶é—´
        setInterval(() => {
          timeCounter++;
          document.getElementById("time-on-page").textContent = timeCounter;
        }, 1000);

        // æ¨¡æ‹Ÿé¡µé¢å…³é—­æ—¶å‘é€ä¿¡æ ‡
        window.addEventListener("beforeunload", () => {
          sendImageBeacon("page-unload");
        });
      });
    </script>
  </body>
</html>
